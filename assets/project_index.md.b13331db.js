import{j as K,a as $,k as D,o as M,c as V,e as L,n as A,b as z,g as P,_ as F}from"./app.fbae26df.js";const J=$('<div style="width:min(100vw, 392px);margin:0 auto;" id="gameContainer"><div style="height:28px;margin-bottom:12px;display:flex;justify-content:space-between;"><input style="color:#10b981;" type="button" value="重新游戏" id="reStart"><input style="color:#10b981;" type="button" value="暂停/开始" id="runOrPause"></div><div style="width:100%;height:28px;border:1px solid black;background:rgb(243, 97, 19);display:flex;gap:20px;align-items:center;padding:0 10px;"><div style="font-size:14px;"><span>速度:</span><span style="font-size:16px;padding-left:6px;font-weight:bold;" id="curSpeedEle"></span></div><div style="font-size:14px;"><span>当前积分:</span><span style="font-size:16px;padding-left:6px;font-weight:bold;" id="curScoreEle"></span></div><div style="font-size:14px;"><span>最高积分:</span><span style="font-size:16px;padding-left:6px;font-weight:bold;" id="maxScoreEle"></span></div></div></div><div style="height:20px;display:flex;justify-content:center;gap:20px;margin-bottom:12px;"><p>⬆️</p></div><div style="height:20px;display:flex;justify-content:center;gap:40px;margin-bottom:12px;"><p>⬅️</p><p>➡️</p></div><div style="height:20px;display:flex;justify-content:center;gap:20px;margin-bottom:12px;"><p>⬇️</p></div>',4),X={__name:"Tetris",setup(N){let s=null,c=1,d=!1,y=!0,r=null,m=0,v=0;const n=function(o,e,l,f){const p=document.getElementById("tetrisCanvas")||document.createElement("canvas");p.id="tetrisCanvas",p.width=e*l,p.height=o*f,p.style.border="1px solid black",r=p.getContext("2d"),r.beginPath();for(let i=1;i<o;i++)r.moveTo(0,i*f),r.lineTo(e*l,i*f);for(let i=1;i<e;i++)r.moveTo(i*l,0),r.lineTo(i*l,o*f);r.closePath(),r.strokeStyle="#aaa",r.lineWidth=.3,r.stroke(),document.getElementById("gameContainer").appendChild(p)};let u=[];for(let o=0;o<20;o++){u[o]=[];for(let e=0;e<14;e++)u[o][e]="NO_BLOCK"}const x=[[{x:14/2,y:0,color:"green"},{x:14/2,y:1,color:"green"},{x:14/2,y:2,color:"green"},{x:14/2,y:3,color:"green"}],[{x:14/2+1,y:0,color:"blue"},{x:14/2,y:0,color:"blue"},{x:14/2,y:1,color:"blue"},{x:14/2-1,y:1,color:"blue"}],[{x:14/2-1,y:0,color:"orange"},{x:14/2,y:0,color:"orange"},{x:14/2,y:1,color:"orange"},{x:14/2+1,y:1,color:"orange"}],[{x:14/2,y:0,color:"red"},{x:14/2-1,y:1,color:"red"},{x:14/2,y:1,color:"red"},{x:14/2+1,y:1,color:"red"}],[{x:14/2-1,y:0,color:"pink"},{x:14/2,y:0,color:"pink"},{x:14/2-1,y:1,color:"pink"},{x:14/2,y:1,color:"pink"}],[{x:14/2,y:0,color:"yellow"},{x:14/2,y:1,color:"yellow"},{x:14/2,y:2,color:"yellow"},{x:14/2-1,y:2,color:"yellow"}],[{x:14/2-1,y:0,color:"purple"},{x:14/2-1,y:1,color:"purple"},{x:14/2-1,y:2,color:"purple"},{x:14/2,y:2,color:"purple"}]];let t=[];const E=function(){let o=Math.floor(Math.random()*x.length);t=[{x:x[o][0].x,y:x[o][0].y,color:x[o][0].color},{x:x[o][1].x,y:x[o][1].y,color:x[o][1].color},{x:x[o][2].x,y:x[o][2].y,color:x[o][2].color},{x:x[o][3].x,y:x[o][3].y,color:x[o][3].color}]},B=()=>{localStorage.removeItem("curScore"),localStorage.removeItem("tetris_status"),localStorage.removeItem("curSpeed"),y=!1,clearInterval(s),window.location.reload()},S=function(){let o=!0;for(let e=0;e<t.length;e++){if(t[e].y>=19){o=!1;break}if(u[t[e].y+1][t[e].x]!="NO_BLOCK"){o=!1;break}}if(o){for(let e=0;e<t.length;e++){let l=t[e];r.fillStyle="white",r.fillRect(l.x*28+1,l.y*28+1,26,26)}for(let e=0;e<t.length;e++){let l=t[e];l.y++}for(let e=0;e<t.length;e++){let l=t[e];r.fillStyle=l.color,r.fillRect(l.x*28+1,l.y*28+1,26,26)}}else{for(let e=0;e<t.length;e++){let l=t[e];if(l.y<1){confirm("游戏结束!是否参与排名?")&&(v=localStorage.getItem("maxScore"),v=v??0,m>=v&&localStorage.setItem("maxScore",m)),B();return}u[l.y][l.x]=l.color}w(),localStorage.setItem("tetris_status",JSON.stringify(u)),E()}},w=function(){let o=0,e=0;for(let l=0;l<20;l++){e=0;for(let f=0;f<14;f++)u[l][f]!="NO_BLOCK"&&(e++,e==14&&o++);if(o>0){curScoreEle.innerHTML=m+=100*o+100*(o-2),localStorage.setItem("curScore",m),(m=c*c*500)&&(curSpeedEle.innerHTML=c+=1,localStorage.setItem("curSpeed",c),clearInterval(s),s=setInterval(()=>S(),1e3/c));for(let f=l;f>0;f--)for(let p=0;p<14;p++)u[f][p]=u[f-1][p];I()}}},I=function(){for(let o=0;o<20;o++)for(let e=0;e<14;e++)u[o][e]!="NO_BLOCK"?(r.fillStyle=u[o][e],r.fillRect(e*28+1,o*28+1,26,26)):(r.fillStyle="white",r.fillRect(e*28+1,o*28+1,26,26))},g=function(){let o=!0;for(let e=0;e<t.length;e++){if(t[e].x<=0){o=!1;break}if(u[t[e].y][t[e].x-1]!="NO_BLOCK"){o=!1;break}}if(o){for(let e=0;e<t.length;e++){let l=t[e];r.fillStyle="white",r.fillRect(l.x*28+1,l.y*28+1,26,26)}for(let e=0;e<t.length;e++){let l=t[e];l.x--}for(let e=0;e<t.length;e++){let l=t[e];r.fillStyle=l.color,r.fillRect(l.x*28+1,l.y*28+1,26,26)}}},C=function(){let o=!0;for(let e=0;e<t.length;e++){if(t[e].x>=13){o=!1;break}if(u[t[e].y][t[e].x+1]!="NO_BLOCK"){o=!1;break}}if(o){for(let e=0;e<t.length;e++){let l=t[e];r.fillStyle="white",r.fillRect(l.x*28+1,l.y*28+1,26,26)}for(let e=0;e<t.length;e++){let l=t[e];l.x++}for(let e=0;e<t.length;e++){let l=t[e];r.fillStyle=l.color,r.fillRect(l.x*28+1,l.y*28+1,26,26)}}},R=function(){let o=!0;for(let e=0;e<t.length;e++){let l=t[e].x,f=t[e].y;if(e!=2){let p=f-t[2].y+t[2].x,a=t[2].x-l+t[2].y;if(p<0&&(C(),p=f-t[2].y+t[2].x,a=t[2].x-l+t[2].y),p<0&&(C(),p=f-t[2].y+t[2].x,a=t[2].x-l+t[2].y),p>=13&&(g(),p=f-t[2].y+t[2].x,a=t[2].x-l+t[2].y),p>=13&&(g(),p=f-t[2].y+t[2].x,a=t[2].x-l+t[2].y),u[a][p]!="NO_BLOCK"){o=!1;break}}}if(o){for(let e=0;e<t.length;e++){let l=t[e];r.fillStyle="white",r.fillRect(l.x*28+1,l.y*28+1,26,26)}for(let e=0;e<t.length;e++){let l=t[e].x,f=t[e].y;e!=2&&(t[e].x=f-t[2].y+t[2].x,t[e].y=t[2].x-l+t[2].y)}for(let e=0;e<t.length;e++){let l=t[e];r.fillStyle=l.color,r.fillRect(l.x*28+1,l.y*28+1,26,26)}}},T=o=>{switch(o){case 40:if(!y)return;S();break;case 37:if(!y)return;g();break;case 38:return y?(R(),!1):void 0;case 39:if(!y)return;C();break;case 32:if(!y)return;d?(s=setInterval(()=>S(),1e3/c),d=!1):(clearInterval(s),d=!0);break}};return K(()=>{n(20,14,28,28),window.onkeydown=p=>T(p.keyCode),document.getElementById("runOrPause").onclick=()=>T(32),document.getElementById("reStart").onclick=()=>B();const o=document.getElementById("curScoreEle"),e=document.getElementById("curSpeedEle"),l=document.getElementById("maxScoreEle"),f=localStorage.getItem("tetris_status");u=f==null?u:JSON.parse(f),I(),m=localStorage.getItem("curScore"),m=m==null?0:parseInt(m),o.innerHTML=m,c=localStorage.getItem("curSpeed"),c=c==null?1:parseInt(c),e.innerHTML=c,v=localStorage.getItem("maxScore"),v=v==null?0:parseInt(v),l.innerHTML=v,E(),s=setInterval(()=>S(),1e3/c),T(32)}),(o,e)=>J}},Y=$('<div style="width:min(100vw, 100%);margin:0 auto;" id="gameContainer"><div style="height:28px;margin-bottom:12px;display:flex;justify-content:space-between;"><input style="color:#10b981;" type="button" value="重新游戏" id="reStart"><input style="color:#10b981;" type="button" value="暂停/开始" id="runOrPause"></div><div style="width:100%;height:28px;border:1px solid black;background:rgb(243, 97, 19);display:flex;gap:20px;align-items:center;padding:0 10px;"><div style="font-size:14px;"><span>速度:</span><span style="font-size:16px;padding-left:6px;font-weight:bold;" id="curSpeedEle"></span></div><div style="font-size:14px;"><span>当前积分:</span><span style="font-size:16px;padding-left:6px;font-weight:bold;" id="curScoreEle"></span></div><div style="font-size:14px;"><span>最高积分:</span><span style="font-size:16px;padding-left:6px;font-weight:bold;" id="maxScoreEle"></span></div></div></div><div style="height:20px;display:flex;justify-content:center;gap:20px;margin-bottom:12px;"><p>⬆️</p></div><div style="height:20px;display:flex;justify-content:center;gap:40px;margin-bottom:12px;"><p>⬅️</p><p>➡️</p></div><div style="height:20px;display:flex;justify-content:center;gap:20px;margin-bottom:12px;"><p>⬇️</p></div>',4),H={__name:"Retro-Sanker",setup(N){let s=null,c=1,d=null,y=0,r=0;const m=[];function v(a,i,_,k){const b=document.getElementById("gameCanvas")||document.createElement("canvas");b.id="gameCanvas",b.width=i*_,b.height=a*k,b.style.border="1px solid black",b.style.autofocus="autofocus",d=b.getContext("2d"),d.beginPath();for(var h=1;h<a;h++)d.moveTo(0,h*k),d.lineTo(_*i,h*k);for(var h=1;h<i;h++)d.moveTo(h*_,0),d.lineTo(h*_,k*a);d.closePath(),d.strokeStyle="#aaa",d.lineWidth=.1,d.stroke();for(let O=0;O<a;O++){m[O]=[];for(let j=0;j<i;j++)m[O][j]="noting",d.fillRect(j*k+1,O*_+1,_-2,k-2)}document.getElementById("gameContainer").appendChild(b)}const n=[{x:32,y:15,color:"red"},{x:31,y:15,color:"green"},{x:30,y:15,color:"green"},{x:29,y:15,color:"green"},{x:28,y:15,color:"green"}];function u(){for(let a=0;a<n.length;a++)d.fillStyle=n[a].color,d.fillRect(n[a].x*15+1,n[a].y*15+1,13,13)}function x(){for(let a=0;a<n.length;a++)d.fillStyle="black",d.fillRect(n[a].x*15+1,n[a].y*15+1,13,13)}let t,E;function B(){t=Math.floor(Math.random()*60),E=Math.floor(Math.random()*30),d.fillStyle="orange",d.fillRect(t*15+1,E*15+1,13,13)}function S(a){for(let i=n.length-1;i>-1;i--)if(i!=0)n[i].y=n[i-1].y,n[i].x=n[i-1].x;else switch(a){case"right":n[i].x=n[i].x+1;break;case"left":n[i].x=n[i].x-1;break;case"top":n[i].y=n[i].y+1;break;case"down":n[i].y=n[i].y-1;break}}function w(){if(t==n[0].x&&E==n[0].y){B();const a=document.getElementById("curScoreEle"),i=document.getElementById("curSpeedEle");a.innerHTML=y+=5,localStorage.setItem("score_snake",y),y>c*10&&(i.innerHTML=c+=1,localStorage.setItem("speed_snake",c)),C=n[0].x,R=n[0].y,n.push({x:C,y:R,color:"green"})}}function I(){(n[0].x==-1||n[0].x==60)&&(y>r?(localStorage.setItem("max_snake",y),localStorage.removeItem("speed_snake"),alert("恭喜您,创造了新的游戏记录!")):(localStorage.removeItem("speed_snake"),alert("游戏结束!")),localStorage.setItem("score_snake",0),clearInterval(s)),(n[0].y==-1||n[0].y==30)&&(y>r?(localStorage.setItem("max_snake",y),localStorage.removeItem("speed_snake"),alert("恭喜您,创造了新的游戏记录!")):(localStorage.removeItem("speed_snake"),alert("游戏结束!")),localStorage.setItem("score_snake",0),clearInterval(s));for(let a=1;a<n.length;a++)n[0].x==n[a].x&&n[0].y==n[a].y&&(y>r?(localStorage.setItem("max_snake",y),localStorage.removeItem("speed_snake"),alert("恭喜您,创造了新的游戏记录!")):(localStorage.removeItem("speed_snake"),alert("游戏结束!")),localStorage.setItem("score_snake",0),clearInterval(s))}let g="right",C,R;function T(){g="right",x(),S("right"),u(),I(),w()}function o(){g="left",x(),S("left"),u(),I(),w()}function e(){g="top",x(),S("top"),u(),I(),w()}function l(){g="down",x(),S("down"),u(),I(),w()}const f=()=>{localStorage.removeItem("score_snake"),localStorage.removeItem("tetris_status"),localStorage.removeItem("speed_snake"),clearInterval(s),window.location.reload()},p=a=>{switch(a){case 37:return g!=="right"&&g!=="left"&&(clearInterval(s),s=setInterval(o,500/c)),!1;case 38:return g!=="down"&&g!=="top"&&(clearInterval(s),s=setInterval(l,500/c)),!1;case 39:return g!=="right"&&g!=="left"&&(clearInterval(s),s=setInterval(T,500/c)),!1;case 40:return g!=="down"&&g!=="top"&&(clearInterval(s),s=setInterval(e,500/c)),!1}};return K(()=>{v(30,60,15,15),window.onkeydown=k=>p(k.keyCode),document.getElementById("runOrPause").onclick=()=>p(32),document.getElementById("reStart").onclick=()=>f();const a=document.getElementById("curScoreEle"),i=document.getElementById("curSpeedEle"),_=document.getElementById("maxScoreEle");y=localStorage.getItem("score_snake"),y=y==null?0:parseInt(y),a.innerHTML=y,c=localStorage.getItem("speed_snake"),c=c==null?1:parseInt(c),i.innerHTML=c,r=localStorage.getItem("max_snake"),r=r==null?0:parseInt(r),_.innerHTML=r,s&&clearInterval(s),s=setInterval(T,500/c),B()}),(a,i)=>Y}},G={"project-tabs":"_project-tabs_9d60k_2"},ee=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"project/index.md"}'),q={name:"project/index.md"},Q=Object.assign(q,{setup(N){const s=D("Tetris");return(c,d)=>(M(),V("div",null,[L("div",{class:A(c.$style["project-tabs"])},[L("a",{onClick:d[0]||(d[0]=y=>s.value="Tetris")},"俄罗斯方块"),L("a",{onClick:d[1]||(d[1]=y=>s.value="RetroSnaker")},"贪吃蛇")],2),s.value==="Tetris"?(M(),z(X,{key:0})):P("",!0),s.value==="RetroSnaker"?(M(),z(H,{key:1})):P("",!0)]))}}),U={$style:G},te=F(Q,[["__cssModules",U]]);export{ee as __pageData,te as default};
